(this.webpackJsonptermtangles=this.webpackJsonptermtangles||[]).push([[0],{170:function(e,t){},222:function(e,t){},228:function(e,t){},271:function(e,t,n){},276:function(e,t,n){},286:function(e,t,n){},356:function(e,t){},380:function(e,t){},385:function(e,t,n){"use strict";n.r(t);var r,i,s,a,o,c,u=n(0),l=n.n(u),d=n(19),h=n.n(d),p=(n(271),n(272),n(254)),f=n(419),g=(n(276),n(10)),b=n(11),j=n(2),m=b.b.button(r||(r=Object(g.a)(["\n  background: transparent;\n  border-radius: 4px;\n  border: 2px solid darkgrey;\n  color: black;\n  margin: 4px 2px;\n  padding: 15px 32px;\n  font-size: 20px;\n  display: inline-block;\n  width: 100%;\n  height: 100%;\n  cursor: pointer;\n\n  transition-duration: 0.2s;\n  :hover {\n    background: #f2f2f2;\n  }\n\n  -webkit-user-select: none;  /* Chrome all / Safari all */\n  -moz-user-select: none;     /* Firefox all */\n  -ms-user-select: none;      /* IE 10+ */\n  user-select: none;          /* Likely future */ \n\n  ","\n"])),(function(e){return e.primary&&Object(b.a)(i||(i=Object(g.a)(["\n    background: darkgrey;\n\n    :hover {\n      background: lightgrey;\n    }\n  "])))})),v=b.b.div(s||(s=Object(g.a)(["\n  width: 48%;\n  display: inline;\n  background: transparent;\n  float: left;\n  margin: 0% 1%;\n"]))),O=function(e){var t=e.localImportExportViewModel,n=l.a.useRef(null);return Object(j.jsxs)(l.a.Fragment,{children:[Object(j.jsx)(v,{children:Object(j.jsx)(m,{primary:!0,onClick:function(){t.export()},children:"Export"})}),Object(j.jsxs)(v,{children:[Object(j.jsx)(m,{onClick:function(){var e;null===(e=n.current)||void 0===e||e.click()},children:"Import"}),Object(j.jsx)("input",{ref:n,onChange:function(e){return t.import(e)},type:"file",style:{display:"none"},accept:"application/JSON"})]})]})},y=n(17),S=n.n(y),x=n(26),C=n(12),E=n(13),w=n(243),P=n(242),k=n.n(P),R=function(){function e(){Object(C.a)(this,e),this._versionNumber=1}return Object(E.a)(e,[{key:"serialize",value:function(){return this._versionNumber}},{key:"deserialize",value:function(){var e=Object(x.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._version){e.next=2;break}throw"ERROR: Version not included.";case 2:console.log("Termtangle data version: "+t._version);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),N=function(){function e(t,n,r){Object(C.a)(this,e),this._serializables=new Map,this._serializables.set("_version",new R),this._serializables.set("userState",t),this._serializables.set("progressionState",n),this._serializables.set("courseState",r)}return Object(E.a)(e,[{key:"serializeToFile",value:function(e){k.a.saveAs(new Blob([JSON.stringify(e)],{type:"application/json;charset=utf-8"}),"termtangles_".concat(w.DateTime.now().toFormat("yyyyMMdd_HHmmssSSS"),".json"))}},{key:"export",value:function(){var e={_version:0,userState:{studyLevel:""}};this._serializables.forEach((function(t,n){e[n]=t.serialize()})),this.serializeToFile(e)}},{key:"deserializeFromString",value:function(){var e=Object(x.a)(S.a.mark((function e(t){var n,r,i=this;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=JSON.parse(t),e.abrupt("return",Promise.resolve(null===(n=this._serializables.get("_version"))||void 0===n?void 0:n.deserialize(r).then((function(){var e;return null===(e=i._serializables.get("userState"))||void 0===e?void 0:e.deserialize(r).then((function(){var e,t;return Promise.resolve([null===(e=i._serializables.get("progressionState"))||void 0===e?void 0:e.deserialize(r),null===(t=i._serializables.get("courseState"))||void 0===t?void 0:t.deserialize(r)])}))}))).catch((function(e){console.error(e)})));case 5:e.prev=5,e.t0=e.catch(0),console.error("ERROR: Invalid JSON (".concat(e.t0.message,")"));case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"import",value:function(e){var t=this,n=e.target.files[0],r=new FileReader;r.onload=function(){var n=Object(x.a)(S.a.mark((function n(r){var i;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(null===(i=r.target)||void 0===i?void 0:i.result)){n.next=4;break}return n.next=3,t.deserializeFromString(r.target.result.toString());case 3:e.target.value="";case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),r.readAsText(n)}}]),e}(),M=n(18),_=n(16),A=n(34),I=n(429),D=n(418),L=n(426),T=n(386);!function(e){e[e.UNPLANNED=0]="UNPLANNED",e[e.PLANNED=1]="PLANNED"}(a||(a={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.COURSE_NOT_OFFERED_IN_SELECTED_TERM=1]="COURSE_NOT_OFFERED_IN_SELECTED_TERM",e[e.PREREQUISITES_NOT_PLANNED=2]="PREREQUISITES_NOT_PLANNED",e[e.PREREQUISITE_REQUIREMENT_NOT_MET=3]="PREREQUISITE_REQUIREMENT_NOT_MET",e[e.COREQUISITE_REQUIREMENT_NOT_MET=4]="COREQUISITE_REQUIREMENT_NOT_MET",e[e.EXCLUSION_COURSE_CONFLICT=5]="EXCLUSION_COURSE_CONFLICT"}(o||(o={})),function(e){e.UNDERGRADUATE="undergraduate",e.POSTGRADUATE="postgraduate",e.RESEARCH="research"}(c||(c={}));var U,V=n(422),F=n(178),z=n(7),G=n(14),B=function(){function e(t,n){Object(C.a)(this,e),this.year=void 0,this.name=void 0,Object(z.o)(this),this.checkTermConstraints(t,n),this.year=t,this.name=n}return Object(E.a)(e,[{key:"checkTermConstraints",value:function(e,t){if(!e)throw Error("ERROR: ".concat(e," is not a valid term year."));if(!t)throw Error("ERROR: ".concat(t," is not a valid term name."))}},{key:"getMappingName",get:function(){return"".concat(this.year,"_").concat(this.name)}},{key:"update",value:function(e,t){this.year=e,this.name=t}},{key:"updateFromMappingName",value:function(e){var t=parseInt(e.split("_")[0]),n=e.split("_")[1];this.update(t,n)}},{key:"getFullName",get:function(){return"".concat(this.year," ").concat(this.name)}},{key:"getTermName",get:function(){return"".concat(this.name)}},{key:"tryGetTermNumber",value:function(){switch(this.name){case"Summer Term":return 0;case"Term 1":return 1;case"Term 2":return 2;case"Term 3":return 3;default:return}}},{key:"equals",value:function(e){return!!e&&(this.year===e.year&&this.name===e.name)}},{key:"isBefore",value:function(e){var t,n;return this.year<e.year||e.year===this.year&&(null!==(t=this.tryGetTermNumber())&&void 0!==t?t:99)<(null!==(n=e.tryGetTermNumber())&&void 0!==n?n:99)}},{key:"serialize",value:function(){return{year:this.year,name:this.name}}},{key:"deserialize",value:function(e){throw Error("ERROR: use static method termFromSerializedData to construct the term from serialized data ".concat(e,"."))}}],[{key:"termFromSerializedData",value:function(t){return new e(t.year,t.name)}},{key:"fromMappingName",value:function(t){return new e(parseInt(t.split("_")[0]),t.split("_")[1])}}]),e}();!function(e){e[e.REMOVE_COURSE=0]="REMOVE_COURSE",e[e.PLAN_COURSE=1]="PLAN_COURSE",e[e.COMPLETE_COURSE=2]="COMPLETE_COURSE"}(U||(U={}));var q,H=new Map([[U.REMOVE_COURSE,{key:"remove",icon:"delete calendar",name:"Remove course from planner",pluralName:"Remove all courses from planner"}],[U.PLAN_COURSE,{key:"plan",icon:"bookmark",name:"Move course to planned",pluralName:"Move all courses to planned"}],[U.COMPLETE_COURSE,{key:"complete",icon:"checked calendar",name:"Move course to completed",pluralName:"Move all courses to completed"}]]);!function(e){e[e.UNPLANNED=0]="UNPLANNED",e[e.PLANNED=1]="PLANNED",e[e.ALLOCATED=2]="ALLOCATED",e[e.COMPLETED=3]="COMPLETED"}(q||(q={}));var Y=function(){function e(t,n,r,i,s,a,o,c,u,l,d,h,p,f,g,b,j){Object(C.a)(this,e),this.code=t,this.contentTypeLabel=n,this.corequisites=r,this.creditPoints=i,this.description=s,this.effectiveDate=a,this.enrolmentRules=o,this.exclusion=c,this.facultyName=u,this.implementationYear=l,this.keywords=d,this.prerequisites=h,this.schoolName=p,this.studyLevel=f,this.termOffering=g,this.title=b,this.urlMap=j,this.allocatedTerm=void 0,this.id=void 0,this.courseStatus=q.UNPLANNED,this._errors=new Set,this.id=t,Object(z.o)(this)}return Object(E.a)(e,[{key:"getSearchWeighting",value:function(){return e.defaultSearching}},{key:"getSearchables",value:function(){return e.searchableFields}},{key:"setAllocated",value:function(e){this.courseStatus=q.ALLOCATED,this.allocatedTerm=e}},{key:"setUnplanned",value:function(){this._errors.clear(),this.courseStatus=q.UNPLANNED,this.allocatedTerm=void 0}},{key:"setCompleted",value:function(){this._errors.clear(),this.courseStatus=q.COMPLETED,this.allocatedTerm=void 0}},{key:"setPlanned",value:function(){this.courseStatus=q.PLANNED,this.allocatedTerm=void 0}},{key:"getActions",value:function(){var e=this,t=new Map;return t.set(U.REMOVE_COURSE,this.courseStatus!==q.UNPLANNED?function(){return e.setUnplanned()}:void 0),t.set(U.PLAN_COURSE,this.courseStatus!==q.PLANNED?function(){return e.setPlanned()}:void 0),t.set(U.COMPLETE_COURSE,this.courseStatus!==q.COMPLETED?function(){return e.setCompleted()}:void 0),t}},{key:"addError",value:function(e){this._errors.add(e)}},{key:"removeError",value:function(e){this._errors.delete(e)}},{key:"hasErrors",value:function(){return this._errors.size>0}},{key:"clearErrors",value:function(){this._errors.clear()}},{key:"errors",get:function(){return Object(G.a)(this._errors)}},{key:"serialize",value:function(){return this.courseStatus!==q.ALLOCATED?{id:this.id,status:q[this.courseStatus]}:{id:this.id,status:q[this.courseStatus],period:null===(e=this.allocatedTerm)||void 0===e?void 0:e.serialize()};var e}},{key:"deserialize",value:function(){var e=Object(x.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.id===this.id){e.next=3;break}return console.error("ERROR: This course is not ".concat(t.id," (is: ").concat(this.id,")")),e.abrupt("return");case 3:e.t0=t.status,e.next=e.t0===q[q.PLANNED]?6:e.t0===q[q.COMPLETED]?8:e.t0===q[q.ALLOCATED]?10:12;break;case 6:return this.setPlanned(),e.abrupt("break",13);case 8:return this.setCompleted(),e.abrupt("break",13);case 10:if(t.period)try{n=B.termFromSerializedData(t.period),this.setAllocated(n)}catch(r){console.error("ERROR: invalid term period passed in ".concat(t.period," (").concat(r.message,")"))}else console.error("ERROR: Allocated course status with no period ".concat(t.id));return e.abrupt("break",13);case 12:console.error("ERROR: ".concat(t.status," is not a valid status"));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toString",value:function(){return"[COURSE_".concat(this.id,"] ").concat(this.code," - ").concat(this.title)}}]),e}();Y.defaultSearching=[{name:"code",weight:2},{name:"title",weight:1.5},{name:"description",weight:.5}],Y.searchableFields={code:"code",uoc:"creditPoints",inDescription:"description",faculty:"facultyName",school:"schoolName",inTitle:"title"};var Q=function(){function e(t,n){var r=this;Object(C.a)(this,e),this.name=t,this.fnGetTargetValue=n,this._possibleValues=new Set,this._selectedValues=new Set,this.filterResultMapping=new Map,this.initializeFilter=function(e){r._possibleValues=new Set(e.map((function(e){return r.fnGetTargetValue(e)})).flat().filter((function(e){return""!==e})))},this.applyFilter=function(e){var t=e;return r._selectedValues.size>0&&(t=e.filter((function(e){return Object(G.a)(r._selectedValues.values()).filter((function(t){return r.fnGetTargetValue(e).includes(t)})).length>0}))),t},Object(z.o)(this)}return Object(E.a)(e,[{key:"getFilterState",value:function(e){var t=this,n=0===Object(G.a)(this._possibleValues.values()).filter((function(e){return isNaN(Number(e))})).length;return Object(G.a)(this._possibleValues.values()).sort((function(e,t){return n?Number(e)-Number(t):e>t?1:-1})).map((function(n){return{filterElementName:n.toString(),numMatchingRecords:e.filter((function(e){return t.fnGetTargetValue(e).includes(n)})).length}}))}},{key:"isSelected",value:function(e){return this._selectedValues.has(e)}},{key:"toggleValue",value:function(e){this._possibleValues.has(e)?this._selectedValues.has(e)?this._selectedValues.delete(e):this._selectedValues.add(e):console.log("invalid value toggled: ".concat(e))}},{key:"resetValue",value:function(e){this._possibleValues.has(e)?this._selectedValues.has(e)&&this._selectedValues.delete(e):console.log("invalid value toggled: ".concat(e))}}]),e}(),W=function(){function e(t,n,r,i,s,o,c,u,l,d,h,p,f,g,b){Object(C.a)(this,e),this.code=t,this.title=n,this.academicItemType=r,this.additionalInfo=i,this.creditPoints=s,this.structureSummary=o,this.curriculumStructure=c,this.description=u,this.facultyName=l,this.implementationYear=d,this.intakePeriod=h,this.programConstraints=p,this.schoolName=f,this.studyLevel=g,this.urlMap=b,this.id=void 0,this.progressionStatus=a.UNPLANNED,this.id=t,Object(z.o)(this)}return Object(E.a)(e,[{key:"getSearchWeighting",value:function(){return e.defaultSearching}},{key:"getSearchables",value:function(){return e.searchableFields}},{key:"setPlanned",value:function(){this.progressionStatus=a.PLANNED}},{key:"setUnplanned",value:function(){this.progressionStatus=a.UNPLANNED}},{key:"serialize",value:function(){return{id:this.code}}},{key:"deserialize",value:function(){var e=Object(x.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.id===this.id){e.next=3;break}return console.error("ERROR: This program is not ".concat(t.id," (is: ").concat(this.id,")")),e.abrupt("return");case 3:this.setPlanned();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toString",value:function(){return"[PROGRAM_".concat(this.id,"] ").concat(this.code," - ").concat(this.title)}}]),e}();W.defaultSearching=[{name:"code",weight:2},{name:"title",weight:1.5},{name:"description",weight:.5}],W.searchableFields={code:"code",inTitle:"title",academicItemType:"academicItemType",uoc:"creditPoints",inStructureSummary:"structureSummary",inDescription:"description",faculty:"facultyName",school:"schoolName",studyLevel:"studyLevel"};var J=function(){function e(t,n,r,i,s,o,c,u,l,d,h,p,f){Object(C.a)(this,e),this.code=t,this.title=n,this.academicItemType=r,this.creditPoints=i,this.structureSummary=s,this.curriculumStructure=o,this.description=c,this.facultyName=u,this.implementationYear=l,this.keywords=d,this.schoolName=h,this.studyLevel=p,this.urlMap=f,this.id=void 0,this.progressionStatus=a.UNPLANNED,this.id=t,Object(z.o)(this)}return Object(E.a)(e,[{key:"getSearchWeighting",value:function(){return e.defaultSearching}},{key:"getSearchables",value:function(){return e.searchableFields}},{key:"setPlanned",value:function(){this.progressionStatus=a.PLANNED}},{key:"setUnplanned",value:function(){this.progressionStatus=a.UNPLANNED}},{key:"serialize",value:function(){return{id:this.code}}},{key:"deserialize",value:function(){var e=Object(x.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.id===this.id){e.next=3;break}return console.error("ERROR: This specialisation is not ".concat(t.id," (is: ").concat(this.id,")")),e.abrupt("return");case 3:this.setPlanned();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toString",value:function(){return"[SPECIALISATION_".concat(this.id,"] ").concat(this.code," - ").concat(this.title)}}]),e}();J.defaultSearching=[{name:"code",weight:2},{name:"title",weight:1.5},{name:"description",weight:.5}],J.searchableFields={code:"code",inTitle:"title",academicItemType:"academicItemType",uoc:"creditPoints",inStructureSummary:"structureSummary",inDescription:"description",faculty:"facultyName",school:"schoolName",studyLevel:"studyLevel"};var Z,X=n(244);!function(e){e[e.COURSES=0]="COURSES",e[e.PROGRAMS=1]="PROGRAMS",e[e.SPECIALISATIONS=2]="SPECIALISATIONS"}(Z||(Z={}));var K,$,ee,te,ne,re,ie,se,ae,oe,ce,ue,le,de,he,pe,fe,ge=function(){function e(t){var n=this;Object(C.a)(this,e),this.searchDataState=t,this.queryText="",this.isLoading=!0,this.resultsPerPage=10,this.searchFilters={courseFilters:[],programFilters:[],specialisationFilters:[]},this.searchResults={courseSearchResults:[],programSearchResults:[],specialisationSearchResults:[]},this.activeItem=Z.COURSES,this.setActiveItem=function(e){n.activeItem=e},this.FUZZY_THRESHOLD=.4,Object(z.o)(this),Object(z.r)((function(){return t.courseSearchData}),(function(){n.setIsLoading(!1),n.searchFilters.courseFilters=function(e){var t=[new Q("Offering Periods",(function(e){return e.termOffering})),new Q("Faculty",(function(e){return[e.facultyName]})),new Q("School",(function(e){return[e.schoolName]})),new Q("Credit Points",(function(e){return[e.creditPoints.toString()]}))];return t.forEach((function(t){return t.initializeFilter(e)})),t}(t.courseSearchData)}),{fireImmediately:!0}),Object(z.r)((function(){return t.programSearchData}),(function(){n.setIsLoading(!1),n.searchFilters.programFilters=function(e){var t=[new Q("Intake Periods",(function(e){return e.intakePeriod})),new Q("Faculty",(function(e){return[e.facultyName]})),new Q("School",(function(e){return[e.schoolName]})),new Q("Credit Points",(function(e){return[e.creditPoints.toString()]})),new Q("Academic Item Type",(function(e){return[e.academicItemType]}))];return t.forEach((function(t){return t.initializeFilter(e)})),t}(t.programSearchData)}),{fireImmediately:!0}),Object(z.r)((function(){return t.specialisationSearchData}),(function(){n.setIsLoading(!1),n.searchFilters.specialisationFilters=function(e){var t=[new Q("Faculty",(function(e){return[e.facultyName]})),new Q("School",(function(e){return[e.schoolName]})),new Q("Credit Points",(function(e){return[e.creditPoints.toString()]})),new Q("Academic Item Type",(function(e){return[e.academicItemType]}))];return t.forEach((function(t){return t.initializeFilter(e)})),t}(t.specialisationSearchData)}),{fireImmediately:!0}),Object(z.g)((function(){return n.searchCourses()}),{delay:150}),Object(z.g)((function(){return n.searchPrograms()}),{delay:150}),Object(z.g)((function(){return n.searchSpecialisations()}),{delay:150})}return Object(E.a)(e,[{key:"setQueryText",value:function(e){this.queryText=e}},{key:"setIsLoading",value:function(e){this.isLoading=e}},{key:"setResultsPerPage",value:function(e){this.resultsPerPage=e}},{key:"search",value:function(e,t,n,r,i,s){if(""!==this.queryText){var a=Object(X.parse)(this.queryText,{keywords:Object.keys(i),offsets:!1,tokenize:!0}),o=t;r.forEach((function(e){o=e.applyFilter(o)}));var c=[];if("string"!==typeof a)for(var u in a)if("text"!==u)if("exclude"!==u){var l={};"='!^".includes(a[u][0])?l[i[u]]=a[u]:l[i[u]]="'".concat(a[u]),c.push(l)}else for(var d in a.exclude){var h={};h[i[d]]="!".concat(a.exclude[d]),c.push(h)}if(c.length>0){var p=new F.a(o,{keys:Object.values(i),shouldSort:!0,threshold:this.FUZZY_THRESHOLD,useExtendedSearch:!0});o=p.search({$and:c}).map((function(e){return e.item}))}var f=new F.a(o,{keys:s,shouldSort:!0,threshold:this.FUZZY_THRESHOLD,useExtendedSearch:!0});"string"===typeof a?o=f.search(a).map((function(e){return e.item})):a.text&&(o="string"!==typeof a.text?f.search(a.text.join(" ")).map((function(e){return e.item})):f.search(a.text).map((function(e){return e.item}))),e(o)}else e(t.sort(n))}},{key:"searchCourses",value:function(){var e=this;this.search((function(t){return Object(z.s)((function(){return e.searchResults.courseSearchResults=t}))}),this.searchDataState.courseSearchData,(function(e,t){return e.code>t.code?1:-1}),this.searchFilters.courseFilters,Y.searchableFields,Y.defaultSearching)}},{key:"searchPrograms",value:function(){var e=this;this.search((function(t){return Object(z.s)((function(){return e.searchResults.programSearchResults=t}))}),this.searchDataState.programSearchData,(function(e,t){return e.title>t.title?1:-1}),this.searchFilters.programFilters,W.searchableFields,W.defaultSearching)}},{key:"searchSpecialisations",value:function(){var e=this;this.search((function(t){return Object(z.s)((function(){return e.searchResults.specialisationSearchResults=t}))}),this.searchDataState.specialisationSearchData,(function(e,t){return e.title>t.title?1:-1}),this.searchFilters.specialisationFilters,J.searchableFields,J.defaultSearching)}}]),e}(),be=n(431),je=n(427),me={backgroundColor:"#dcdcdc",border:"none",color:"black",padding:"15px 32px",textDecoration:"none",display:"inline-block",fontSize:"16px",margin:"4px 2px",cursor:"pointer",width:"100%",height:"100%"},ve=n(423),Oe=Object(_.a)((function(e){var t=Object(u.useState)(new Set),n=Object(M.a)(t,2),r=n[0],i=n[1];return Object(j.jsx)(A.a,{children:function(){var t=e.filter.getFilterState(e.searchResults);return Object(j.jsxs)(I.a.Item,{children:[Object(j.jsx)(je.a.Title,{active:r.has(e.filter.name),content:e.filter.name,onClick:function(){var t=new Set(r);r.has(e.filter.name)?t.delete(e.filter.name):t.add(e.filter.name),i(t)}}),Object(j.jsx)(je.a.Content,{active:r.has(e.filter.name),content:Object(j.jsx)(ve.a,{children:Object(j.jsx)(ve.a.Group,{grouped:!0,children:t.map((function(t){return Object(j.jsx)(ve.a.Checkbox,{label:"".concat(t.filterElementName),name:e.filter.name,type:"checkbox",value:t.filterElementName,checked:e.filter.isSelected(t.filterElementName),onClick:function(){e.filter.toggleValue(t.filterElementName)}},t.filterElementName)}))})})})]},e.filter.name)}})})),ye=(n(286),Object(_.a)((function(e){return Object(j.jsx)(A.a,{children:function(){return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{className:"resetbutton",children:Object(j.jsx)("button",{style:me,onClick:function(){e.filters.forEach((function(t){t.getFilterState(e.searchResults).forEach((function(e){t.resetValue(e.filterElementName)}))}))},children:"Reset Filter"})}),Object(j.jsx)(je.a,{fluid:!0,as:I.a,vertical:!0,children:e.filters.map((function(t){return Object(j.jsx)(Oe,{searchResults:e.searchResults,filter:t})}))})]})}})}))),Se=n(424),xe=n(433),Ce=Object(b.b)(Se.a)(K||(K=Object(g.a)(["\n  &&& {\n    :before{\n      width:0px;\n    }\n    border: 0px solid lightgrey;\n    padding: 6px;\n    display: flex;\n    align-items: flex-start;\n    justify-content: space-between;\n    margin:0px\n  }\n  &&&&{\n    padding:1em 0;\n  }\n"]))),Ee=Object(b.b)(Se.a.Header)($||($=Object(g.a)(["\n"]))),we=Object(b.b)(Se.a.Content)(ee||(ee=Object(g.a)(["\n  &&&&& {\n    flex: 1;\n    padding:0;\n  }\n"]))),Pe=Object(b.b)(Se.a.Extra)(te||(te=Object(g.a)(["\n  &&&& {\n    margin: 0;\n    text-align: right;\n    flex: 1;\n  }\n"]))),ke=Object(b.b)(Se.a.Group)(ne||(ne=Object(g.a)(["\n  && {\n    padding: 15px 0px 10px 0px;\n    margin: 0px;\n  }\n"]))),Re=Object(b.b)(xe.a)(re||(re=Object(g.a)(["\n  max-height: 40px;\n"]))),Ne=Object(b.b)(be.a.Column)(ie||(ie=Object(g.a)(["\n  padding-bottom: 20px;\n  max-height:80vh;\n  overflow: auto;\n"]))),Me=Object(b.b)(be.a.Column)(se||(se=Object(g.a)(["\n  padding-bottom: 20px;\n  max-height:80vh;\n  overflow: auto;\n"]))),_e=n(81),Ae=Object(_.a)((function(e){var t=Object(u.useState)(!1),n=Object(M.a)(t,2),r=n[0],i=n[1];return Object(j.jsx)(A.a,{children:function(){return Object(j.jsxs)(Ce,{onMouseOver:function(){return i(!0)},onMouseLeave:function(){return i(!1)},children:[Object(j.jsxs)(we,{children:[Object(j.jsx)(Ee,{children:e.course.code}),Object(j.jsx)(Se.a.Description,{children:e.course.title})]}),r?Object(j.jsx)(we,{children:Object(j.jsx)(Pe,{children:Object(j.jsxs)(T.a.Group,{children:[Object(j.jsx)(T.a,{basic:e.course.courseStatus!==q.PLANNED&&e.course.courseStatus!==q.ALLOCATED,icon:e.course.courseStatus===q.ALLOCATED?"calendar alternate outline":"bookmark",content:e.course.courseStatus===q.ALLOCATED?"Scheduled":"Interested",color:e.course.courseStatus===q.ALLOCATED?"orange":"blue",size:"medium",onClick:function(){e.course.courseStatus===q.PLANNED||e.course.courseStatus===q.ALLOCATED?e.course.setUnplanned():e.course.setPlanned()}}),Object(j.jsx)(T.a,{basic:e.course.courseStatus!==q.COMPLETED,icon:"check",content:"Done",color:"green",size:"medium",onClick:function(){e.course.courseStatus===q.COMPLETED?e.course.setUnplanned():e.course.setCompleted()}}),Object(j.jsx)(T.a,{basic:!0,icon:"book",content:"Handbook",color:"red",size:"medium",onClick:function(){return function(e){var t=window.open(e,"_blank","noopener,noreferrer");t&&(t.opener=null)}("https://www.handbook.unsw.edu.au".concat(e.course.urlMap))}})]})})}):Object(j.jsxs)(we,{children:[Object(j.jsxs)(Pe,{children:[e.course.creditPoints," UOC"]}),Object(j.jsx)(Pe,{children:e.course.courseStatus===q.PLANNED?Object(j.jsx)(_e.a,{color:"red",className:"bookmark"}):e.course.courseStatus===q.ALLOCATED?Object(j.jsx)(_e.a,{color:"orange",className:"calendar alternate outline"}):e.course.courseStatus===q.COMPLETED?Object(j.jsx)(_e.a,{color:"green",className:"check"}):""})]})]})}})})),Ie=(Object(b.b)(Se.a.Group)(ae||(ae=Object(g.a)(["\n  &&& {\n    padding: 15px 0px 10px 0px;\n  }\n"]))),Object(_.a)((function(e){return Object(j.jsx)(A.a,{children:function(){return Object(j.jsx)(ke,{divided:!0,children:e.results.map((function(e){return Object(j.jsx)(Ae,{course:e})}))})}})}))),De=Object(_.a)((function(e){var t=Object(u.useState)(1),n=Object(M.a)(t,2),r=n[0],i=n[1];return Object(j.jsx)(A.a,{children:function(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(be.a,{columns:12,divided:!0,container:!0,children:Object(j.jsxs)(be.a.Row,{children:[Object(j.jsx)(Ne,{width:4,children:Object(j.jsx)(ye,{searchResults:e.searchPanelViewModel.searchResults.courseSearchResults,filters:e.searchPanelViewModel.searchFilters.courseFilters})},"filter"),Object(j.jsxs)(Me,{width:12,children:[Object(j.jsx)(Ie,{results:e.searchPanelViewModel.searchResults.courseSearchResults.slice(e.searchPanelViewModel.resultsPerPage*(r-1),Math.min(e.searchPanelViewModel.searchResults.courseSearchResults.length,e.searchPanelViewModel.resultsPerPage*r))}),Object(j.jsx)(Re,{totalPages:Math.ceil(e.searchPanelViewModel.searchResults.courseSearchResults.length/e.searchPanelViewModel.resultsPerPage),onPageChange:function(e,t){i(Number(t.activePage))},activePage:r})]},"results")]})})})}})})),Le=Object(_.a)((function(e){var t=Object(u.useState)(!1),n=Object(M.a)(t,2),r=n[0],i=n[1];return Object(j.jsx)(A.a,{children:function(){return Object(j.jsxs)(Ce,{onMouseEnter:function(){return i(!0)},onMouseLeave:function(){return i(!1)},children:[Object(j.jsxs)(we,{children:[Object(j.jsx)(Se.a.Header,{children:e.program.title}),Object(j.jsxs)(Se.a.Description,{children:[e.program.academicItemType," - ",e.program.code]})]}),r?Object(j.jsx)(we,{children:Object(j.jsx)(Pe,{children:Object(j.jsxs)(T.a.Group,{children:[Object(j.jsx)(T.a,{basic:e.program.progressionStatus===a.UNPLANNED,icon:e.program.progressionStatus===a.UNPLANNED?"plus circle":"minus circle",content:e.program.progressionStatus===a.UNPLANNED?"Add":"Remove",color:e.program.progressionStatus===a.UNPLANNED?"green":"red",size:"medium",onClick:function(){e.program.progressionStatus===a.UNPLANNED?e.program.setPlanned():e.program.setUnplanned()}}),Object(j.jsx)(T.a,{basic:!0,icon:"book",content:"Handbook",color:"red",size:"medium",onClick:function(){return function(e){var t=window.open(e,"_blank","noopener,noreferrer");t&&(t.opener=null)}("https://www.handbook.unsw.edu.au".concat(e.program.urlMap))}})]})})}):Object(j.jsxs)(we,{children:[Object(j.jsxs)(Pe,{children:[e.program.creditPoints," UOC"]}),Object(j.jsx)(Pe,{children:e.program.progressionStatus===a.PLANNED?Object(j.jsx)(_e.a,{color:"green",className:"calendar alternate outline"}):Object(j.jsx)(j.Fragment,{})})]})]})}})})),Te=Object(_.a)((function(e){return Object(j.jsx)(A.a,{children:function(){return Object(j.jsx)(ke,{divided:!0,children:e.results.map((function(e){return Object(j.jsx)(Le,{program:e})}))})}})})),Ue=Object(_.a)((function(e){var t=Object(u.useState)(1),n=Object(M.a)(t,2),r=n[0],i=n[1];return Object(j.jsx)(A.a,{children:function(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(be.a,{columns:12,divided:!0,container:!0,children:Object(j.jsxs)(be.a.Row,{children:[Object(j.jsx)(Ne,{width:4,children:Object(j.jsx)(ye,{searchResults:e.searchPanelViewModel.searchResults.programSearchResults,filters:e.searchPanelViewModel.searchFilters.programFilters})},"filter"),Object(j.jsxs)(Me,{width:12,children:[Object(j.jsx)(Te,{results:e.searchPanelViewModel.searchResults.programSearchResults.slice(e.searchPanelViewModel.resultsPerPage*(r-1),Math.min(e.searchPanelViewModel.searchResults.programSearchResults.length,e.searchPanelViewModel.resultsPerPage*r))}),Object(j.jsx)(Re,{totalPages:Math.ceil(e.searchPanelViewModel.searchResults.programSearchResults.length/e.searchPanelViewModel.resultsPerPage),onPageChange:function(e,t){i(Number(t.activePage))},activePage:r})]},"results")]})})})}})})),Ve=Object(_.a)((function(e){var t=Object(u.useState)(!1),n=Object(M.a)(t,2),r=n[0],i=n[1];return Object(j.jsx)(A.a,{children:function(){return Object(j.jsxs)(Ce,{onMouseEnter:function(){return i(!0)},onMouseLeave:function(){return i(!1)},children:[Object(j.jsxs)(we,{children:[Object(j.jsx)(Se.a.Header,{children:e.specialisation.title}),Object(j.jsxs)(Se.a.Description,{children:[e.specialisation.academicItemType," - ",e.specialisation.code]})]}),r?Object(j.jsx)(we,{children:Object(j.jsx)(Pe,{children:Object(j.jsxs)(T.a.Group,{children:[Object(j.jsx)(T.a,{basic:e.specialisation.progressionStatus===a.UNPLANNED,icon:e.specialisation.progressionStatus===a.UNPLANNED?"plus circle":"minus circle",content:e.specialisation.progressionStatus===a.UNPLANNED?"Add":"Remove",color:e.specialisation.progressionStatus===a.UNPLANNED?"green":"red",size:"medium",onClick:function(){e.specialisation.progressionStatus===a.UNPLANNED?e.specialisation.setPlanned():e.specialisation.setUnplanned()}}),Object(j.jsx)(T.a,{basic:!0,icon:"book",content:"Handbook",color:"red",size:"medium",onClick:function(){return function(e){var t=window.open(e,"_blank","noopener, noreferrer");t&&(t.opener=null)}("https://www.handbook.unsw.edu.au".concat(e.specialisation.urlMap))}})]})})}):Object(j.jsxs)(we,{children:[Object(j.jsxs)(Pe,{children:[e.specialisation.creditPoints," UOC"]}),Object(j.jsx)(Pe,{children:e.specialisation.progressionStatus===a.PLANNED?Object(j.jsx)(_e.a,{color:"green",className:"calendar alternate outline"}):Object(j.jsx)(j.Fragment,{})})]})]})}})})),Fe=Object(_.a)((function(e){return Object(j.jsx)(A.a,{children:function(){return Object(j.jsx)(ke,{divided:!0,children:e.results.map((function(e){return Object(j.jsx)(Ve,{specialisation:e})}))})}})})),ze=Object(_.a)((function(e){var t=Object(u.useState)(1),n=Object(M.a)(t,2),r=n[0],i=n[1];return Object(j.jsx)(A.a,{children:function(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(be.a,{columns:12,divided:!0,container:!0,children:Object(j.jsxs)(be.a.Row,{children:[Object(j.jsx)(Ne,{width:4,children:Object(j.jsx)(ye,{searchResults:e.searchPanelViewModel.searchResults.specialisationSearchResults,filters:e.searchPanelViewModel.searchFilters.specialisationFilters})},"filter"),Object(j.jsxs)(Me,{width:12,children:[Object(j.jsx)(Fe,{results:e.searchPanelViewModel.searchResults.specialisationSearchResults.slice(e.searchPanelViewModel.resultsPerPage*(r-1),Math.min(e.searchPanelViewModel.searchResults.specialisationSearchResults.length,e.searchPanelViewModel.resultsPerPage*r))}),Object(j.jsx)(Re,{totalPages:Math.ceil(e.searchPanelViewModel.searchResults.specialisationSearchResults.length/e.searchPanelViewModel.resultsPerPage),onPageChange:function(e,t){i(Number(t.activePage))},activePage:r})]},"results")]})})})}})})),Ge=b.b.div(oe||(oe=Object(g.a)(["\n  display: flex;\n  align-items: flex-start;\n  justify-content: space-between;\n  padding: 6px;\n"]))),Be=b.b.h4(ce||(ce=Object(g.a)(["\n  &&& {\n    margin: 1rem 0 0.5rem 0.5rem\n  }\n"]))),qe=Object(_.a)((function(e){var t=e.searchPanelViewModel,n=function(){var e=-1;switch(t.activeItem){case Z.COURSES:e=t.searchResults.courseSearchResults.length;break;case Z.PROGRAMS:e=t.searchResults.programSearchResults.length;break;case Z.SPECIALISATIONS:e=t.searchResults.specialisationSearchResults.length}return e};return Object(j.jsx)(A.a,{children:function(){return Object(j.jsx)(l.a.Fragment,{children:Object(j.jsxs)(f.a,{children:[Object(j.jsxs)(I.a,{pointing:!0,secondary:!0,children:[Object(j.jsx)(I.a.Item,{name:"courses",active:t.activeItem===Z.COURSES,onClick:function(){return t.setActiveItem(Z.COURSES)},children:"Courses (".concat(t.searchResults.courseSearchResults.length,")")}),Object(j.jsx)(I.a.Item,{name:"programs",active:t.activeItem===Z.PROGRAMS,onClick:function(){return t.setActiveItem(Z.PROGRAMS)},children:"Programs (".concat(t.searchResults.programSearchResults.length,")")}),Object(j.jsx)(I.a.Item,{name:"specialisations",active:t.activeItem===Z.SPECIALISATIONS,onClick:function(){return t.setActiveItem(Z.SPECIALISATIONS)},children:"Specialisations (".concat(t.searchResults.specialisationSearchResults.length,")")})]}),Object(j.jsxs)(Ge,{children:[Object(j.jsxs)(Be,{children:["Found ",n()," result",1===n()?"":"s"]}),Object(j.jsxs)("span",{children:[Object(j.jsx)("span",{style:{marginRight:"10px"},children:"Results per page"}),Object(j.jsx)(V.a,{text:t.resultsPerPage.toString(),selection:!0,options:[{text:10,value:10},{text:20,value:20},{text:30,value:30},{text:50,value:50}],onChange:function(e,n){t.setResultsPerPage(Number(n.value))}})]})]}),t.activeItem===Z.COURSES?Object(j.jsx)(De,{searchPanelViewModel:t}):Object(j.jsx)(j.Fragment,{}),t.activeItem===Z.PROGRAMS?Object(j.jsx)(Ue,{searchPanelViewModel:t}):Object(j.jsx)(j.Fragment,{}),t.activeItem===Z.SPECIALISATIONS?Object(j.jsx)(ze,{searchPanelViewModel:t}):Object(j.jsx)(j.Fragment,{})]})})}})})),He=n(247),Ye=n.n(He),Qe=Object(b.b)(I.a)(ue||(ue=Object(g.a)(["\n  &&{\n    height:50px;\n    margin:0;\n  }\n"]))),We=b.b.div(le||(le=Object(g.a)(["\n  &&&{\n    position:block;\n    z-index:420;\n    background:white;\n    margin-top:11px;\n    display: ",";\n    border: 1px solid rgba(34,36,38,.15);\n    box-shadow:0 2px 5px 0 rgb(34 36 38 / 15%);\n  }\n"])),(function(e){return e.isActive?"block":"none"})),Je=Object(b.b)(I.a.Item)(de||(de=Object(g.a)(["\n  &&&& {\n    display:block;\n    position: absolute;\n    right:0;\n    ",";\n    // transition: width 0.2s cubic-bezier(0.000, 0.795, 0.000, 1.000);\n    z-index:420;\n  }\n"])),(function(e){return e.isActive?"width: calc(min(60vw,1200px))":"width: 300px"})),Ze=Object(_.a)((function(e){var t=e.userState,n=e.searchDataState,r=Object(u.useState)(void 0),i=Object(M.a)(r,2),s=i[0],a=i[1],o=Object(u.useState)(!1),d=Object(M.a)(o,2),h=d[0],p=d[1],f=new ge(n);return Object(j.jsx)(A.a,{children:function(){return Object(j.jsxs)(l.a.Fragment,{children:[Object(j.jsxs)(Qe,{children:[Object(j.jsx)(I.a.Item,{header:!0,children:"Termtangles"}),Object(j.jsx)(I.a.Item,{name:"Undergraduate",active:t.studyLevel===c.UNDERGRADUATE,onClick:function(){return t.studyLevel!==c.UNDERGRADUATE?a((function(){return function(){return t.setStudyLevel(c.UNDERGRADUATE)}})):{}}}),Object(j.jsx)(I.a.Item,{name:"Postgraduate",active:t.studyLevel===c.POSTGRADUATE,onClick:function(){return t.studyLevel!==c.POSTGRADUATE?a((function(){return function(){return t.setStudyLevel(c.POSTGRADUATE)}})):{}}}),Object(j.jsx)(I.a.Item,{name:"Research",active:t.studyLevel===c.RESEARCH,onClick:function(){return t.studyLevel!==c.RESEARCH?a((function(){return function(){return t.setStudyLevel(c.RESEARCH)}})):{}}}),Object(j.jsx)(I.a.Menu,{position:"right",children:Object(j.jsx)(Ye.a,{onOutsideClick:function(){return p(!1)},children:Object(j.jsxs)(Je,{isActive:h,children:[Object(j.jsx)(D.a,{icon:"search",iconPosition:"left",placeholder:"Search",loading:f.isLoading,onFocus:function(){p(!0)},onChange:function(e,t){return f.setQueryText(t.value)},value:f.queryText}),Object(j.jsx)(We,{isActive:h,children:Object(j.jsx)(qe,{searchPanelViewModel:f})})]})})})]}),Object(j.jsxs)(L.a,{size:"small",open:void 0!==s,onClose:function(){return a(void 0)},children:[Object(j.jsx)(L.a.Header,{children:"Study Level Change"}),Object(j.jsx)(L.a.Content,{children:Object(j.jsx)("p",{children:"Changing study level will reset all current progress. Do you want to continue?"})}),Object(j.jsxs)(L.a.Actions,{children:[Object(j.jsx)(T.a,{negative:!0,onClick:function(){return a(void 0)},children:"No"}),Object(j.jsx)(T.a,{positive:!0,onClick:function(){s&&s(),a(void 0)},children:"Yes"})]})]})]})}})})),Xe=n(21),Ke=n(95),$e=n(116),et=n(420),tt=b.b.div(he||(he=Object(g.a)(["\n  border: ",";\n  border-radius: 8px;\n  padding: 8px;\n  margin: 0px 2px 8px 2px;\n  background-color: ",";\n  ","\n  \n  ","\n\n  /* needed for SelectionCount */\n  position: relative;\n\n  ","\n  height: fit-content;\n  max-width: 350px;\n\n  &:active {\n    outline: none;\n    border: 2px inset lightgrey;\n  }\n\n\n  -webkit-user-select: none;  /* Chrome all / Safari all */\n  -moz-user-select: none;     /* Firefox all */\n  -ms-user-select: none;      /* IE 10+ */\n  user-select: none;          /* Likely future */\n"])),(function(e){return e.isSelected?"2px dashed royalblue":"2px solid lightgrey"}),(function(e){return e.isPrerequisiteOfCurrentDraggable?"#c5eafc":e.hasErrors()?"#f5bfc8":e.isDragging?"lightgrey":"white"}),(function(e){return e.isDragging?"box-shadow: 2px 2px 1px lightgrey;":""}),(function(e){return e.isGhosting?"opacity: 0.9; color: darkgrey;":""}),(function(e){return e.horizontal?"":"flex-grow: 1;"})),nt=b.b.div(pe||(pe=Object(g.a)(["\n  right: -20px;\n  top: -20px;\n  color: white;\n  background: royalblue;\n  border-radius: 50%;\n  height: 35px;\n  width: 35px;\n  line-height: 35px;\n  position: absolute;\n  text-align: center;\n  font-size: 15px;\n  \n"]))),rt=b.b.p(fe||(fe=Object(g.a)(["\n  -webkit-user-select: none;  /* Chrome all / Safari all */\n  -moz-user-select: none;     /* Firefox all */\n  -ms-user-select: none;      /* IE 10+ */\n  user-select: none;          /* Likely future */      \n"]))),it={fontSize:13};var st,at,ot,ct,ut,lt,dt,ht,pt,ft,gt,bt,jt,mt,vt,Ot,yt,St=function(e){var t=function(e,t){var n=(e=e.slice().sort()).join(", ");return n="Term Offerings: ".concat(n," ")}(e.course.termOffering,e.course.allocatedTerm),n=function(e){var t=[],n=[],r=[],i=/<br\/>/gi;if(0===e.length)return[""];if(1===e.length)return[e[0].message.replace(i,""),"".concat(e[0].missing," ")];for(var s=0;s<e.length;s++)t.push(e[s].message.replace(i,"")),n.push(e[s].missing);for(var a=0;a<e.length;a++)""!==n[a]&&r.push(n[a]);return[t.join(" & "),r.join(" & ")]}(e.course.errors);Object(u.useEffect)((function(){return e.registerDraggableRef(e.course,r)}));var r=l.a.useRef();return Object(j.jsx)(Ke.b,{draggableId:e.course.code,index:e.droppableIndex,children:function(i,s){return Object(j.jsxs)(tt,Object(Xe.a)(Object(Xe.a)(Object(Xe.a)({horizontal:e.horizontal},i.draggableProps),i.dragHandleProps),{},{ref:function(e){i.innerRef(e),r.current=e},isDragging:s.isDragging,isPrerequisiteOfCurrentDraggable:e.prerequisitesOfCurrentDraggable.has(e.course.id),hasErrors:function(){return e.course.hasErrors()},isSelected:e.isSelected,onClick:function(t){return e.onCourseClick(e.course,t)},isGhosting:e.isGhosting,onContextMenu:function(t){return e.onCourseContextMenu(e.course,t)},"data-draggable":!0,children:[e.isRegionSelecting?Object(j.jsxs)(rt,{children:[" ",e.course.code," - ",e.course.title]}):Object(j.jsx)(et.a,{title:Object(j.jsxs)("span",{children:[Object(j.jsx)(rt,{style:it,children:t}),Object(j.jsx)(rt,{style:it,children:n[0]}),Object(j.jsx)(rt,{style:it,children:n[1]})]}),"aria-label":"add","aria-multiline":"true",arrow:!0,children:Object(j.jsxs)(rt,{children:[" ",e.course.code," - ",e.course.title]})}),s.isDragging&&e.selectedCoursesCount>1?Object(j.jsx)(nt,{children:e.selectedCoursesCount}):void 0]}))}})},xt=b.b.div(st||(st=Object(g.a)(["\n  margin: 8px;\n  border: 1px solid lightgrey;\n  border-radius:2px;\n\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  ",";\n  ",";\n  -webkit-user-select: none;  /* Chrome all / Safari all */\n  -moz-user-select: none;     /* Firefox all */\n  -ms-user-select: none;      /* IE 10+ */\n  user-select: none;          /* Likely future */ \n"])),(function(e){return e.horizontal?"":"max-width: 350px"}),(function(e){return"Planned"===e.title?"min-width: 350px":""})),Ct=b.b.h3(at||(at=Object(g.a)(["\n  padding: 6px;\n  margin: 0 0;\n  display: flex;\n  width: 200px;\n"]))),Et=b.b.div(ot||(ot=Object(g.a)(["\n  padding: 6px;\n  min-height: 100px;\n  transition: background-color 0.2s ease;\n  background-color: ",";\n  flex-grow: 1;\n  display: flex;\n  flex-direction: ",";\n  flex-flow: row ",";\n  align-content: flex-start;\n  max-width: inherit;\n"])),(function(e){return e.isDraggingOver?e.isValidDroppable||e.isMultiSelectDragging?"#8debb7":"#ff99b0":e.isPossibleTermOfCurrentDraggable?"#cafae0":("completed"===e.courseID||e.courseID,"#edf2f4")}),(function(e){return e.horizontal?"row":"column"}),(function(e){return e.horizontal?"wrap":"nowrap"})),wt=b.b.div(ct||(ct=Object(g.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n"]))),Pt=Object(b.b)($e.a)(ut||(ut=Object(g.a)(["\n  && {\n    margin: auto 0 auto 0;\n    height: fit-content;\n    vertical-align: middle;\n    white-space: nowrap;\n  } \n"]))),kt=function(e){var t=function(t){return e.currentDraggableProps.possibleTerms.filter((function(e){return e.equals(t)})).length>0},n=e.courses.map((function(e){return e.creditPoints})).reduce((function(e,t){return e+t}),0);return Object(j.jsxs)(xt,{horizontal:e.horizontal,title:e.title,children:[Object(j.jsxs)(wt,{children:[Object(j.jsx)(Ct,{children:e.title}),e.term?Object(j.jsx)(Pt,{color:18===n||3===e.courses.length?"green":n<18?"orange":"yellow",content:"".concat(n," UOC"),size:"small"}):Object(j.jsx)(j.Fragment,{})]}),Object(j.jsx)(Ke.c,{droppableId:e.id,direction:e.horizontal?"horizontal":"vertical",children:function(n,r){return Object(j.jsxs)(Et,Object(Xe.a)(Object(Xe.a)({horizontal:!0},n.droppableProps),{},{ref:n.innerRef,isDraggingOver:r.isDraggingOver,courseID:n.droppableProps["data-rbd-droppable-id"],isPossibleTermOfCurrentDraggable:t(e.term),isValidDroppable:null===e.term||t(e.term),isMultiSelectDragging:e.selectedCourses.length>1,children:[e.courses?e.courses.map((function(t,n){var r=e.selectedCourses.includes(t),i=r&&!!e.draggingCourseId&&e.draggingCourseId!==t.id;return Object(j.jsx)(St,{horizontal:e.horizontal,course:t,droppableIndex:n,prerequisitesOfCurrentDraggable:e.currentDraggableProps.prerequisiteCourseIds,isSelected:r,isGhosting:i,registerDraggableRef:e.registerDraggableRef,selectedCoursesCount:e.selectedCourses.length,onCourseClick:e.onCourseClick,onCourseContextMenu:e.onCourseContextMenu,isRegionSelecting:e.isRegionSelecting},t.code)})):void 0,n.placeholder]}))}})]})},Rt=b.b.div(lt||(lt=Object(g.a)(["\n    margin: 8px;\n    border: 1px solid lightgrey;\n    border-radius:2px;\n    width: 250px;\n    -webkit-user-select: none;  /* Chrome all / Safari all */\n    -moz-user-select: none;     /* Firefox all */\n    -ms-user-select: none;      /* IE 10+ */\n    user-select: none;          /* Likely future */ \n"]))),Nt=b.b.h3(dt||(dt=Object(g.a)(["\n    padding: 6px;\n    margin: 3px;\n    display: flex;\n    width: 200px;\n"]))),Mt=function(e){return Object(j.jsxs)(Rt,{children:[Object(j.jsx)(Nt,{children:e.year}),e.courseGroups.map((function(t){return Object(j.jsx)(kt,{id:t.id,title:t.title,courses:t.courses,term:t.term,currentDraggableProps:e.currentDraggableProps,registerDraggableRef:e.registerDraggableRef,selectedCourses:e.selectedCourses,draggingCourseId:e.draggingCourseId,onCourseClick:e.onCourseClick,onCourseContextMenu:e.onCourseContextMenu,isRegionSelecting:e.isRegionSelecting},t.id)}))]})},_t=n(421),At=Object(_.a)((function(e){l.a.useEffect((function(){return window.addEventListener("contextmenu",a),function(){window.removeEventListener("contextmenu",a)}}));var t=l.a.useRef(),n=l.a.useState([]),r=Object(M.a)(n,2),i=r[0],s=r[1],a=function(n){n.defaultPrevented||0!==e.selectorViewModel.getSelected().length&&(s(function(){var t=e.selectorViewModel.getSelected().length>1,n=e.selectorViewModel.getSelected().map((function(e){return e.getActions()}));return Object(G.a)(n.reduce((function(e,t){return t.forEach((function(t,n){var r;e.get(n)||e.set(n,[]),t&&(null===(r=e.get(n))||void 0===r||r.push(t))})),e}),new Map).entries()).filter((function(e){var t=Object(M.a)(e,2);return t[0],t[1].length>0})).map((function(e){var n=Object(M.a)(e,2),r=n[0],i=n[1],s=H.get(r);return s?{key:s.key,content:t?s.pluralName:s.name,icon:s.icon,onClick:function(){i.forEach((function(e){return e.call(null)}))}}:{}}))}()),n.preventDefault(),function(n){t.current={getBoundingClientRect:function(){return{left:n.clientX,top:n.clientY,right:n.clientX+1,bottom:n.clientY+1,height:0,width:0}}},e.setIsContextOpen(!0)}(n))};return Object(j.jsx)(A.a,{children:function(){return Object(j.jsx)(_t.a,{basic:!0,context:t,onClose:function(){return e.setIsContextOpen(!1)},open:e.isContextOpen,children:Object(j.jsx)(I.a,{items:i,onItemClick:function(t){t.preventDefault(),e.setIsContextOpen(!1)},secondary:!0,vertical:!0})})}})})),It=n(157),Dt=function(e){return navigator.platform.includes("Mac")?e.metaKey:e.ctrlKey},Lt=function(e){l.a.useEffect((function(){return window.addEventListener("mousedown",t),window.addEventListener("mouseup",n),function(){window.removeEventListener("mousedown",t),window.removeEventListener("mouseup",n)}}));var t=function(e){a||Dt(e)&&o(!0)},n=function(e){o(!1)},r=l.a.useRef([]),i=l.a.useState(!1),s=Object(M.a)(i,2),a=s[0],o=s[1],c=l.a.useState([]),u=Object(M.a)(c,2),d=u[0],h=u[1],p=Object(It.useSelectionContainer)({onSelectionStart:function(){e.setIsRegionSelecting(!0),r.current=Object(G.a)(e.draggableItemsMap.entries()).reduce((function(e,t){var n=Object(M.a)(t,2),r=n[0],i=n[1].getBoundingClientRect();return[].concat(Object(G.a)(e),[[r,i]])}),[])},onSelectionEnd:function(){r.current=[],h([])},onSelectionChange:l.a.useCallback(a?function(t){r.current.filter((function(e){var n=Object(M.a)(e,2),r=n[0],i=n[1],s=d.includes(r),a=Object(It.boxesIntersect)(t,i);return s!==a&&(s&&!a&&h((function(e){return e.filter((function(e){return e!==r}))})),!s&&a&&h((function(e){return[].concat(Object(G.a)(e),[r])})),!0)}),[]).forEach((function(t){var n=Object(M.a)(t,2),r=n[0];n[1];return e.selectorViewModel.onToggle(r)}))}:function(t){r.current.filter((function(n){var r=Object(M.a)(n,2),i=r[0],s=r[1];return e.selectorViewModel.getSelected().includes(i)!==Object(It.boxesIntersect)(t,s)}),[]).forEach((function(t){var n=Object(M.a)(t,2),r=n[0];n[1];return e.selectorViewModel.onToggle(r)}))},[a,d])}).DragSelection;return Object(j.jsx)(p,{})},Tt=function(e){var t=e.plannerViewModel.courseState;return Object(j.jsx)(Ke.a,{onBeforeCapture:function(){e.plannerViewModel.currentDraggableProps=Object(Xe.a)(Object(Xe.a)({},e.plannerViewModel.currentDraggableProps),{},{isDragging:!0})},onDragStart:function(n){e.setIsDragging(!0),e.plannerViewModel.getSelected().find((function(e){return e.id===n.draggableId}))||e.plannerViewModel.unselectAll(),e.plannerViewModel.draggingCourseId=n.draggableId;var r=t.getCourseById(n.draggableId);r&&(e.plannerViewModel.selected.length>1||(e.plannerViewModel.currentDraggableProps=Object(Xe.a)(Object(Xe.a)({},e.plannerViewModel.currentDraggableProps),{},{possibleTerms:e.plannerViewModel.calculateDisplayableTerms().filter((function(e){return 0===t.getMissingRequirementsWhenAssigningCourseToTerm(r,e).length})),prerequisiteCourseIds:new Set(t.getFlattenedPrerequisiteList(r.prerequisites))})))},onDragEnd:function(n){var r,i=n.destination,s=n.source;if(i&&"CANCEL"!==n.reason){if(e.plannerViewModel.draggingCourseId){if(e.plannerViewModel.getSelected().forEach((function(t){return e.plannerViewModel.setCourseByDroppableId(t,s.droppableId,i.droppableId)})),e.plannerViewModel.getAllGroups().forEach((function(t){t.courses=t.courses.filter((function(t){return!e.plannerViewModel.getSelected().find((function(e){return e.id===t.id}))}))})),(r=e.plannerViewModel).spliceByGroupId.apply(r,[i.droppableId,i.index,0].concat(Object(G.a)(e.plannerViewModel.getSelected()))),!!!e.plannerViewModel.getSelected().find((function(t){return t.id===e.plannerViewModel.draggingCourseId}))){var a=t.getCourseById(e.plannerViewModel.draggingCourseId);a&&(e.plannerViewModel.setCourseByDroppableId(a,s.droppableId,i.droppableId),e.plannerViewModel.spliceByGroupId(s.droppableId,s.index,1),e.plannerViewModel.spliceByGroupId(i.droppableId,i.index+e.plannerViewModel.selected.length,0,a))}e.setIsDragging(!1),e.plannerViewModel.draggingCourseId=void 0,e.plannerViewModel.clearCurrentDraggableProps()}}else e.plannerViewModel.draggingCourseId=void 0},children:e.children})},Ut=b.b.div(ht||(ht=Object(g.a)(["\n  display: flex;\n  flex-direction: row;\n"]))),Vt=b.b.div(pt||(pt=Object(g.a)(["\n  display: inherit;\n  overflow: auto;\n"]))),Ft=Object(_.a)((function(e){var t=e.plannerViewModel;return Object(j.jsx)(A.a,{children:function(){var e=t.plannerState;Object(u.useEffect)((function(){return window.addEventListener("keydown",f),window.addEventListener("dragenter",b),window.addEventListener("dragexit",m),window.addEventListener("mouseup",g),function(){window.removeEventListener("keydown",f),window.removeEventListener("dragenter",b),window.removeEventListener("dragexit",m),window.removeEventListener("mouseup",g)}}));var n=l.a.useRef(new Map),r=l.a.useState(!1),i=Object(M.a)(r,2),s=i[0],a=i[1],o=function(e,t){return t.current?(n.current.set(e,t.current),function(){n.current.delete(e)}):function(){}},c=l.a.useState(!1),d=Object(M.a)(c,2),h=d[0],p=d[1],f=function(e){e.defaultPrevented||"Escape"===e.key&&t.unselectAll()},g=function(e){S||h||(e.preventDefault(),s?a(!1):0===e.button&&(Dt(e)||t.unselectAll()))},b=function(e){e.preventDefault()},m=function(e){e.preventDefault()},v=function(e,n){n.defaultPrevented||0===n.button&&(s||(n.preventDefault(),S||(Dt(n)||t.unselectAll(),t.onToggle(e))))},O=l.a.useState(!1),y=Object(M.a)(O,2),S=y[0],x=y[1],C=function(e,n){n.defaultPrevented||t.selected.includes(e)||(t.unselectAll(),t.onToggle(e))};return Object(j.jsxs)(l.a.Fragment,{children:[Object(j.jsx)(Lt,{selectorViewModel:t,draggableItemsMap:n.current,setIsRegionSelecting:a}),Object(j.jsx)(At,{selectorViewModel:t,isContextOpen:S,setIsContextOpen:x}),Object(j.jsxs)(Tt,{plannerViewModel:t,setIsDragging:p,children:[Object(j.jsx)(kt,{horizontal:!0,id:e.completedGroup.id,title:e.completedGroup.title,term:null,courses:e.completedGroup.courses,currentDraggableProps:t.currentDraggableProps,selectedCourses:t.getSelected(),draggingCourseId:t.draggingCourseId,onCourseClick:v,onCourseContextMenu:C,isRegionSelecting:s,registerDraggableRef:o},e.completedGroup.id),Object(j.jsxs)(Ut,{children:[Object(j.jsx)(kt,{horizontal:!1,id:e.plannedGroup.id,title:e.plannedGroup.title,term:null,courses:e.plannedGroup.courses,currentDraggableProps:t.currentDraggableProps,selectedCourses:t.getSelected(),draggingCourseId:t.draggingCourseId,onCourseClick:v,onCourseContextMenu:C,isRegionSelecting:s,registerDraggableRef:o},e.plannedGroup.id),Object(j.jsx)(Vt,{children:e.yearGroups.map((function(e){return Object(j.jsx)(Mt,{id:e.id,title:e.title,year:e.year,courseGroups:e.courseGroups,currentDraggableProps:t.currentDraggableProps,selectedCourses:t.getSelected(),draggingCourseId:t.draggingCourseId,onCourseClick:v,onCourseContextMenu:C,isRegionSelecting:s,registerDraggableRef:o})}))})]}),t.currentDraggableProps.isDragging?Object(j.jsx)(kt,{horizontal:!0,id:"trash",title:"Remove",term:null,courses:[],currentDraggableProps:t.currentDraggableProps,selectedCourses:t.getSelected(),draggingCourseId:t.draggingCourseId,onCourseClick:v,onCourseContextMenu:C,isRegionSelecting:s,registerDraggableRef:o},"trash"):Object(j.jsx)(j.Fragment,{})]})]})}})})),zt=function(){function e(t){Object(C.a)(this,e),this._courseState=void 0,this._plannerState=void 0,this._reactionDisposers=new Map,this._selected=[],this._draggingCourseId=void 0,this._currentDraggableProps={isDragging:!1,possibleTerms:[],prerequisiteCourseIds:new Set},Object(z.p)(this,{_currentDraggableProps:z.q,currentDraggableProps:z.h,clearCurrentDraggableProps:z.f,_selected:z.q,selected:z.h,_draggingCourseId:z.q,draggingCourseId:z.h}),this._courseState=t,this._plannerState={id:"plannerState",title:"Visualizer",allocatedGroups:[],yearGroups:[],completedGroup:{id:"completed",title:"Completed",term:null,courses:[]},plannedGroup:{id:"planned",title:"Planned",term:null,courses:[]}}}return Object(E.a)(e,[{key:"courseState",get:function(){return this._courseState}},{key:"plannerState",get:function(){return this.synchronizePlannerState(),this._plannerState}},{key:"getSelected",value:function(){return this._selected}},{key:"selected",get:function(){return this._selected},set:function(e){this._selected=e}},{key:"unselectAll",value:function(){var e=this;this.selected.forEach((function(t){var n;return null===(n=e._reactionDisposers.get(t))||void 0===n?void 0:n.call(null)})),this.selected=[]}},{key:"addRemoveReaction",value:function(e){var t=this,n=Object(z.r)((function(){return e.courseStatus}),(function(n,r){var i;n!==r&&(n===q.UNPLANNED&&(t.selected=t.getSelected().filter((function(t){return t.id!==e.id})),null===(i=t._reactionDisposers.get(e))||void 0===i||i.call(null)))}));this._reactionDisposers.set(e,n)}},{key:"onToggle",value:function(e){var t=this,n=this.selected.indexOf(e),r=function(){if(-1===n)return t.addRemoveReaction(e),[].concat(Object(G.a)(t.selected),[e]);var r,i=Object(G.a)(t.selected);return i.splice(n,1),null===(r=t._reactionDisposers.get(e))||void 0===r||r.call(null),i}();this.selected=r}},{key:"setCourseByDroppableId",value:function(e,t,n){t!==n&&("trash"===n?e.setUnplanned():"completed"===n?e.setCompleted():"planned"===n?e.setPlanned():e.setAllocated(B.fromMappingName(n)))}},{key:"draggingCourseId",get:function(){return this._draggingCourseId},set:function(e){this._draggingCourseId=e}},{key:"synchronizeCourseList",value:function(e,t){var n=new Set(e),r=new Set(t),i=new Set(Object(G.a)(r).filter((function(e){return!n.has(e)}))),s=new Set(Object(G.a)(n).filter((function(e){return!r.has(e)})));i.forEach((function(e){var n=t.indexOf(e);t.splice(n,1)})),s.forEach((function(e){t.push(e)}))}},{key:"calculateDisplayableTerms",value:function(){for(var e=this._courseState.getMaxAllocatedYear,t=[],n=(new Date).getFullYear();n<=e+1;++n)t.push(new B(n,"Summer Term")),t.push(new B(n,"Term 1")),t.push(new B(n,"Term 2")),t.push(new B(n,"Term 3"));return t}},{key:"synchronizePlannerState",value:function(){var e=this,t=this.calculateDisplayableTerms(),n=Object(G.a)(new Set(t.map((function(e){return e.year})))).sort(),r=t.map((function(t){var n,r;return{id:t.getMappingName,title:t.getFullName,term:t,courses:null!==(n=null===(r=e._plannerState.allocatedGroups.find((function(e){return e.id===t.getMappingName})))||void 0===r?void 0:r.courses)&&void 0!==n?n:[]}})),i=Object(Xe.a)(Object(Xe.a)({},this._plannerState),{},{allocatedGroups:r,yearGroups:n.map((function(e){var t;return{id:"yearGroup_".concat(e.toString()),title:e.toString(),year:e,courseGroups:null!==(t=r.filter((function(t){var n;return(null===(n=t.term)||void 0===n?void 0:n.year)===e})))&&void 0!==t?t:[]}}))});i.allocatedGroups.forEach((function(t){var n;e.synchronizeCourseList(null!==(n=e._courseState.termCourseMap.get(t.id))&&void 0!==n?n:[],t.courses)})),i.yearGroups.forEach((function(t){t.courseGroups.forEach((function(t){var n;e.synchronizeCourseList(null!==(n=e._courseState.termCourseMap.get(t.id))&&void 0!==n?n:[],t.courses)}))})),this.synchronizeCourseList(this._courseState.plannedCourses,i.plannedGroup.courses),this.synchronizeCourseList(this._courseState.completedCourses,i.completedGroup.courses),this._plannerState=i}},{key:"getCourseGroupById",value:function(e){return this._plannerState.completedGroup.id===e?this._plannerState.completedGroup:this._plannerState.plannedGroup.id===e?this._plannerState.plannedGroup:this._plannerState.allocatedGroups.find((function(t){return t.id===e}))}},{key:"getAllGroups",value:function(){return[this._plannerState.completedGroup,this._plannerState.plannedGroup].concat(Object(G.a)(this._plannerState.allocatedGroups))}},{key:"spliceByGroupId",value:function(e,t,n){var r,i,s=this.getCourseGroupById(e);if(!s)return[];for(var a=arguments.length,o=new Array(a>3?a-3:0),c=3;c<a;c++)o[c-3]=arguments[c];return n?(r=s.courses).splice.apply(r,[t,n].concat(o)):(i=s.courses).splice.apply(i,[t,0].concat(o))}},{key:"currentDraggableProps",get:function(){return Object(Xe.a)({},this._currentDraggableProps)},set:function(e){this._currentDraggableProps=e}},{key:"clearCurrentDraggableProps",value:function(){this.currentDraggableProps={isDragging:!1,possibleTerms:[],prerequisiteCourseIds:new Set}}}]),e}(),Gt=n(145),Bt=n(146),qt=n.n(Bt),Ht=n(252),Yt=function e(t,n){var r,i=[];if((r=t)&&r.or){var s,a=Object(Ht.a)(t.or);try{for(a.s();!(s=a.n()).done;){var o,c=s.value,u=e(c,n);if(0===u.length){i=[];break}(o=i).push.apply(o,Object(G.a)(u))}}catch(l){a.e(l)}finally{a.f()}}else!function(e){return e&&e.and}(t)?n(t)||i.push(t):t.and.forEach((function(t){var r;(r=i).push.apply(r,Object(G.a)(e(t,n)))}));return i},Qt=n(114),Wt=n.n(Qt),Jt=function(){function e(t){var n,r=this;Object(C.a)(this,e),this._userState=t,this.validations=(n=this,[function(e){e.allocatedTerm&&!e.termOffering.includes(e.allocatedTerm.getTermName)&&e.addError({code:o.COURSE_NOT_OFFERED_IN_SELECTED_TERM,message:"This course is not offered in ".concat(e.allocatedTerm.getTermName),missing:""})},function(e){if(e.allocatedTerm){var t=n.getMissingPrerequisitesBeforeTerm(e.prerequisites,e.allocatedTerm);t.length>0&&e.addError({code:o.PREREQUISITE_REQUIREMENT_NOT_MET,message:"The prerequisites for this course are not satisfied\n".concat(e.enrolmentRules.join(";")),missing:"Missing: ".concat(t)})}},function(e){if(e.courseStatus!==q.ALLOCATED){var t=n.getMissingPrerequisitesPlanned(e.prerequisites);t.length>0&&e.addError({code:o.PREREQUISITES_NOT_PLANNED,message:"A valid combination of prerequisites for this course have not been planned\n".concat(e.enrolmentRules.join(";")),missing:"Missing: ".concat(t)})}},function(e){var t=[];e.exclusion.forEach((function(e){var r=n.getCourseById(e);r&&r.courseStatus!==q.UNPLANNED&&t.push(e)})),t.length>0&&e.addError({code:o.EXCLUSION_COURSE_CONFLICT,message:"The following exclusion courses conflict with this course ".concat(t.join(", ")),missing:""})}]),this.coursesMapById=new Map,this.coursesMapByActiveStatus=new Map,this._isUpdated=!1,Object(z.o)(this),Object(z.r)((function(){return r._userState.studyLevel}),(function(){r._isUpdated=!1,r._updateStudyLevel()}),{fireImmediately:!0}),t.registerStudyLevelUpdateActionCallback((function(){return Promise.resolve(r._updateStudyLevel())}))}return Object(E.a)(e,[{key:"isUpdated",get:function(){return this._isUpdated}},{key:"allCourses",get:function(){return Object(G.a)(this.coursesMapById.values())}},{key:"_resetCourseMap",value:function(){this.coursesMapById=new Map,this.coursesMapByActiveStatus=new Map,this.coursesMapByActiveStatus.set(q.UNPLANNED,new Map),this.coursesMapByActiveStatus.set(q.PLANNED,new Map),this.coursesMapByActiveStatus.set(q.ALLOCATED,new Map),this.coursesMapByActiveStatus.set(q.COMPLETED,new Map)}},{key:"_loadAllCourses",value:function(){var e=Object(x.a)(S.a.mark((function e(t){var n=this;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wt.a.get("https://raw.githubusercontent.com/termtangles/termtangles_data/main/v2/publish/2022/".concat(t.toString(),"/all_courses.json")).then((function(e){Object(z.t)((function(){n._resetCourseMap(),e.data.forEach((function(e){var t=new Y(e.code,e.contentTypeLabel,e.corequisites,e.creditPoints,e.description,e.effectiveDate,e.enrolmentRules,e.exclusion,e.facultyName,e.implementationYear,e.keywords,e.prerequisites,e.schoolName,e.studyLevel,e.termOffering,e.title,e.urlMap);n.addCourse(t)}))}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateStudyLevel",value:function(){var e=Object(x.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._loadAllCourses(this._userState.studyLevel);case 2:this._isUpdated=!0;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"termCourseMap",get:function(){var e,t=new Map;return null===(e=this.coursesMapByActiveStatus.get(q.ALLOCATED))||void 0===e||e.forEach((function(e){if(e.allocatedTerm){var n=t.get(e.allocatedTerm.getMappingName);n?n.push(e):t.set(e.allocatedTerm.getMappingName,[e])}})),t}},{key:"completedCourses",get:function(){var e,t;return Object(G.a)(null!==(e=null===(t=this.coursesMapByActiveStatus.get(q.COMPLETED))||void 0===t?void 0:t.values())&&void 0!==e?e:[])}},{key:"plannedCourses",get:function(){var e,t;return Object(G.a)(null!==(e=null===(t=this.coursesMapByActiveStatus.get(q.PLANNED))||void 0===t?void 0:t.values())&&void 0!==e?e:[])}},{key:"allocatedCourses",get:function(){var e,t;return Object(G.a)(null!==(e=null===(t=this.coursesMapByActiveStatus.get(q.ALLOCATED))||void 0===t?void 0:t.values())&&void 0!==e?e:[])}},{key:"activeCourses",get:function(){var e=[];return e=e.concat(this.completedCourses,this.plannedCourses,this.allocatedCourses)}},{key:"getMaxAllocatedYear",get:function(){var e=Object(G.a)(this.termCourseMap.keys()),t=(new Date).getFullYear();return e.length>0&&(t=B.fromMappingName(e.sort().slice(-1)[0]).year),t}},{key:"getCourseById",value:function(e){return this.coursesMapById.get(e)}},{key:"addCourse",value:function(e){var t=this;this.coursesMapById.set(e.id,e),Object(z.r)((function(){return e.courseStatus}),(function(){for(var n in q)if(isNaN(Number(n))){var r,i,s=q[n];if(s!==e.courseStatus)null===(r=t.coursesMapByActiveStatus.get(s))||void 0===r||r.delete(e.id);else null===(i=t.coursesMapByActiveStatus.get(s))||void 0===i||i.set(e.id,e)}}),{fireImmediately:!0}),Object(z.r)((function(){return e.courseStatus}),(function(){t.runValidations()}),{fireImmediately:!0}),Object(z.r)((function(){return e.allocatedTerm}),(function(){t.runValidations()}),{fireImmediately:!0})}},{key:"runValidations",value:function(){var e=this;Object(z.t)((function(){var t,n,r;null===(t=e.coursesMapByActiveStatus.get(q.PLANNED))||void 0===t||t.forEach((function(t){t.clearErrors(),e.validations.forEach((function(e){e(t)}))})),null===(n=e.coursesMapByActiveStatus.get(q.ALLOCATED))||void 0===n||n.forEach((function(t){t.clearErrors(),e.validations.forEach((function(e){e(t)}))})),null===(r=e.coursesMapByActiveStatus.get(q.COMPLETED))||void 0===r||r.forEach((function(e){e.clearErrors()}))}))}},{key:"resetHard",value:function(){Object(G.a)(this.coursesMapById.values()).forEach((function(e){e.setUnplanned()}))}},{key:"getFlattenedPrerequisiteList",value:function(e){return Yt(e,(function(e){return!1}))}},{key:"getMissingPrerequisitesBeforeTerm",value:function(e,t){var n=this;return Yt(e,(function(e){if("string"===typeof e){var r,i=e,s=n.getCourseById(i);return!!s&&(s.courseStatus===q.ALLOCATED&&(null===(r=s.allocatedTerm)||void 0===r?void 0:r.isBefore(t))||s.courseStatus===q.COMPLETED)}return!0}))}},{key:"getMissingPrerequisitesPlanned",value:function(e){var t=this;return Yt(e,(function(e){if("string"===typeof e){var n=e,r=t.getCourseById(n);return!!r&&r.courseStatus!==q.UNPLANNED}return!0}))}},{key:"courseIsOffered",value:function(e,t){for(var n=0;n<t.length;n++)if(e.getTermName===t[n])return!0;return!1}},{key:"getMissingRequirementsWhenAssigningCourseToTerm",value:function(e,t){var n=this.getMissingPrerequisitesBeforeTerm(e.prerequisites,t);return this.courseIsOffered(t,e.termOffering)||n.push("Course is not offered in ".concat(t.getFullName)),n}},{key:"assignCourseToTerm",value:function(e,t){return 0===this.getMissingRequirementsWhenAssigningCourseToTerm(e,t).length&&(e.setAllocated(t),!0)}},{key:"serialize",value:function(){return{courses:this.activeCourses.map((function(e){return e.serialize()}))}}},{key:"deserialize",value:function(){var e=Object(x.a)(S.a.mark((function e(t){var n,r=this;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.courseState){e.next=2;break}return e.abrupt("return");case 2:if((n=t.courseState).courses){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,Object(z.v)((function(){return r._isUpdated}));case 7:this.resetHard(),n.courses.forEach((function(e){if(e.id){var t=r.getCourseById(e.id);t?t.deserialize(e):console.error("ERROR: ".concat(e.id," is not a valid course."))}}));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Zt=n(428),Xt=function(){function e(t,n,r,i,s,a){Object(C.a)(this,e),this.title=t,this.description=n,this.creditPoints=r,this.elements=i,this.containers=s,this.order=a,this.id=Object(Zt.a)()}return Object(E.a)(e,[{key:"toString",value:function(){return this.title+", "+this.description}}]),e}(),Kt=function(){function e(t,n,r,i,s,a,o){Object(C.a)(this,e),this.name=t,this.description=n,this.type=r,this.creditPoints=i,this.itemCode=s,this.url=a,this.order=o}return Object(E.a)(e,[{key:"isCourse",value:function(){return"course"===this.type.toLowerCase()}},{key:"isSpecialisation",value:function(){return["major","minor","specialisation","honours"].includes(this.type.toLowerCase())}},{key:"toString",value:function(){return this.name+", "+this.type}}]),e}(),$t=function e(t){var n=[];return t.forEach((function(t){var r=[],i=[];t.children.length>0&&(r=e(t.children)),t.relationships.length>0&&(i=en(t.relationships));var s=new Xt(t.title,t.description,Number(t.creditPoints),i,r,Number(t.order));n.push(s)})),n},en=function(e){var t=[];return e.forEach((function(e){var n=new Kt(e.name,e.description,e.type,Number(e.creditPoints),e.itemCode,e.url,Number(e.order));t.push(n)})),t},tn=function(){function e(t){var n=this;Object(C.a)(this,e),this._userState=void 0,this._programMapById=new Map,this._specialisationMapById=new Map,this._isUpdated=!1,this._updateStudyLevel=Object(x.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.loadAllPrograms(n._userState.studyLevel);case 2:return e.next=4,n.loadAllSpecialisations(n._userState.studyLevel);case 4:n._isUpdated=!0;case 5:case"end":return e.stop()}}),e)}))),this.loadAllPrograms=Object(z.f)((function(e){return Wt.a.get("https://raw.githubusercontent.com/termtangles/termtangles_data/main/v2/publish/2022/".concat(e.toString(),"/all_programs.json")).then((function(e){Object(z.t)((function(){n._programMapById.clear(),e.data.forEach((function(e){var t=new W(e.code,e.title,e.academicItemType,e.additionalInfo,e.creditPoints,e.structureSummary,$t(e.curriculumStructure),e.description,e.facultyName,e.implementationYear,e.intakePeriod,e.programConstraints,e.schoolName,e.studyLevel,e.urlMap);n.addProgram(t)}))}))}))})),this.loadAllSpecialisations=Object(z.f)((function(e){return Wt.a.get("https://raw.githubusercontent.com/termtangles/termtangles_data/main/v2/publish/2022/".concat(e.toString(),"/all_specialisations.json")).then((function(e){Object(z.t)((function(){n._specialisationMapById.clear(),e.data.forEach((function(e){var t=new J(e.code,e.title,e.academicItemType,e.creditPoints,e.structureSummary,$t(e.curriculumStructure),e.description,e.facultyName,e.implementationYear,e.keywords,e.schoolName,e.studyLevel,e.urlMap);n.addSpecialisation(t)}))}))}))})),Object(z.o)(this),this._userState=t,Object(z.r)((function(){return n._userState.studyLevel}),(function(){n._isUpdated=!1,n._updateStudyLevel()}),{fireImmediately:!0}),t.registerStudyLevelUpdateActionCallback((function(){return Promise.resolve(n._updateStudyLevel())}))}return Object(E.a)(e,[{key:"isUpdated",get:function(){return this._isUpdated}},{key:"allPrograms",get:function(){return Object(G.a)(this._programMapById.values())}},{key:"allSpecialisations",get:function(){return Object(G.a)(this._specialisationMapById.values())}},{key:"getProgramById",value:function(e){return this._programMapById.get(e)}},{key:"getSpecialisationById",value:function(e){return this._specialisationMapById.get(e)}},{key:"plannedPrograms",get:function(){return this.allPrograms.filter((function(e){return e.progressionStatus===a.PLANNED}))}},{key:"plannedSpecialisations",get:function(){return this.allSpecialisations.filter((function(e){return e.progressionStatus===a.PLANNED}))}},{key:"plannedProgressionEntities",get:function(){var e=this.plannedPrograms;return e=e.concat(this.plannedSpecialisations)}},{key:"resetHard",value:function(){this._programMapById.forEach((function(e){e.setUnplanned()})),this._specialisationMapById.forEach((function(e){e.setUnplanned()}))}},{key:"addProgram",value:function(e){this._programMapById.set(e.id,e)}},{key:"addSpecialisation",value:function(e){this._specialisationMapById.set(e.id,e)}},{key:"serialize",value:function(){return{programs:this.plannedPrograms.map((function(e){return e.serialize()})),specialisations:this.plannedSpecialisations.map((function(e){return e.serialize()}))}}},{key:"deserialize",value:function(){var e=Object(x.a)(S.a.mark((function e(t){var n,r=this;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.progressionState){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(z.v)((function(){return r._isUpdated}));case 4:this.resetHard(),(n=t.progressionState).programs&&n.programs.forEach((function(e){if(e.id){var t=r.getProgramById(e.id);t?t.deserialize(e):console.error("ERROR: ".concat(e.id," is not a valid program."))}})),n.specialisations&&n.specialisations.forEach((function(e){if(e.id){var t=r.getSpecialisationById(e.id);t?t.deserialize(e):console.error("ERROR: ".concat(e.id," is not a valid specialisation."))}}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),nn=function(){function e(t,n){Object(C.a)(this,e),this._courseState=t,this._progressionState=n}return Object(E.a)(e,[{key:"courseSearchData",get:function(){return this._courseState.allCourses}},{key:"programSearchData",get:function(){return this._progressionState.allPrograms}},{key:"specialisationSearchData",get:function(){return this._progressionState.allSpecialisations}}]),e}(),rn=function(e){switch(e){case"undergraduate":return c.UNDERGRADUATE;case"postgraduate":return c.POSTGRADUATE;case"research":return c.RESEARCH;default:return}},sn=new(function(){function e(){Object(C.a)(this,e),this._studyLevel=c.UNDERGRADUATE,this._isUpdated=!0,this._studyLevelUpdateActionCallbacks=[],Object(z.o)(this)}return Object(E.a)(e,[{key:"studyLevel",get:function(){return this._studyLevel}},{key:"setStudyLevel",value:function(){var e=Object(x.a)(S.a.mark((function e(t){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._studyLevel===t){e.next=4;break}return this._studyLevel=t,n=this._studyLevelUpdateActionCallbacks.map((function(e){return e()})),e.abrupt("return",Promise.all(n));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isUpdated",get:function(){return this._isUpdated},set:function(e){this._isUpdated=e}},{key:"registerStudyLevelUpdateActionCallback",value:function(e){this._studyLevelUpdateActionCallbacks.push(e)}},{key:"serialize",value:function(){return{studyLevel:this._studyLevel}}},{key:"deserialize",value:function(){var e=Object(x.a)(S.a.mark((function e(t){var n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.userState){e.next=2;break}throw"ERROR: User state not included.";case 2:if((n=t.userState).studyLevel){e.next=5;break}throw"ERROR: User state must include a studyLevel parameter.";case 5:if(r=rn(n.studyLevel)){e.next=8;break}throw"ERROR: ".concat(n.studyLevel," is not a valid study level.");case 8:return e.next=10,this.setStudyLevel(r);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),an=new Jt(sn),on=new tn(sn),cn=new nn(an,on),un=Object(u.createContext)({userState:sn,courseState:an,progressionState:on,searchDataState:cn}),ln=Object(_.a)((function(e){var t=Object(u.useContext)(un);return Object(j.jsx)(A.a,{children:function(){return e.curriculumElements.length>0?Object(j.jsx)(ke,{divided:!0,children:e.curriculumElements.sort((function(e,t){return Number(e.order)-Number(t.order)})).map((function(e){if(e.isCourse()){var n=t.courseState.getCourseById(e.itemCode);return n?Object(j.jsx)(Ae,{course:n}):Object(j.jsx)(j.Fragment,{})}if(e.isSpecialisation()){var r=t.progressionState.getSpecialisationById(e.itemCode);return r?Object(j.jsx)(Ve,{specialisation:r}):Object(j.jsx)(j.Fragment,{})}return Object(j.jsx)("p",{children:e.description})}))}):Object(j.jsx)(j.Fragment,{})}})})),dn=Object(b.b)($e.a)(ft||(ft=Object(g.a)(["\n  &&& {\n    margin-left:auto\n    \n  }\n"]))),hn=Object(b.b)(je.a.Title)(gt||(gt=Object(g.a)(["\n  &&& {\n    display:flex;\n  }\n"]))),pn=b.b.div(bt||(bt=Object(g.a)(["\n  display: flex;\n  justify-content: space-between;\n"]))),fn=b.b.a(jt||(jt=Object(g.a)(["\n  min-width: 80px;\n  text-align: right;\n"]))),gn=b.b.div(mt||(mt=Object(g.a)(["\n  margin-left:10px;\n"]))),bn=Object(_.a)((function(e){var t=function(t){var n=e.progressionPlannerViewModel.calculateUocOfChildren(t);return t.creditPoints>0?Object(j.jsxs)(dn,{size:"small",color:n===t.creditPoints?"green":n<t.creditPoints?"orange":"yellow",children:[n," / ",t.creditPoints," UOC"]}):n>0?Object(j.jsxs)(dn,{size:"small",color:"green",children:[n," UOC"]}):void 0};return Object(j.jsx)(A.a,{children:function(){return e.curriculumContainer.length>0?Object(j.jsx)(je.a.Accordion,{exclusive:!1,panels:Object(G.a)(e.curriculumContainer).sort((function(e,t){return Number(e.order)-Number(t.order)})).map((function(n){return{key:n.id,title:Object(j.jsxs)(hn,{children:[Object(j.jsx)(_e.a,{className:e.progressionPlannerViewModel.isContainerActive(n.id)?"caret down":"caret right"}),n.title,t(n)]}),content:{content:Object(j.jsxs)("div",{children:[Object(j.jsxs)(gn,{children:[Object(j.jsxs)(pn,{children:[Object(j.jsx)("span",{children:Object(Gt.a)(qt()(n.description))}),n.containers.length>0?Object(j.jsx)(fn,{href:"#",onClick:function(){return e.progressionPlannerViewModel.toggleAllContainers(n)},children:e.progressionPlannerViewModel.isAnySubContainerActive(n)?"Collapse All":"Expand All"}):Object(j.jsx)(j.Fragment,{})]}),Object(j.jsx)(ln,{entityId:e.entityId,curriculumElements:n.elements})]}),Object(j.jsx)(bn,{entityId:e.entityId,curriculumContainer:n.containers,progressionPlannerViewModel:e.progressionPlannerViewModel})]})},active:e.progressionPlannerViewModel.isContainerActive(n.id),onTitleClick:function(){e.progressionPlannerViewModel.toggleContainer(n.id)}}}))},e.entityId):Object(j.jsx)(j.Fragment,{})}})})),jn=b.b.a(vt||(vt=Object(g.a)(["\ncolor: black;\nbackground-color: transparent;\ntext-decoration: none;\n\n&:hover {\n  color: #db2828;\n  background-color: transparent;\n  text-decoration: line-through;\n}\n"]))),mn=Object(_.a)((function(e){return Object(j.jsx)(A.a,{children:function(){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h2",{children:Object(j.jsx)(jn,{href:"#",onClick:function(){return e.entity.setUnplanned()},children:e.entity.title})}),Object(j.jsx)("span",{children:Object(Gt.a)(qt()(e.entity.structureSummary))}),Object(j.jsx)(je.a,{fluid:!0,styled:!0,children:Object(j.jsx)(bn,{entityId:e.entity.id,curriculumContainer:e.entity.curriculumStructure,progressionPlannerViewModel:e.progressionPlannerViewModel})})]})}})})),vn=Object(b.b)(f.a)(Ot||(Ot=Object(g.a)(["\n  margin:1em 0;\n"]))),On=Object(_.a)((function(e){var t=e.progressionPlannerViewModel;return Object(j.jsx)(A.a,{children:function(){return Object(j.jsx)(l.a.Fragment,{children:Object(j.jsx)(vn,{children:t.progressionState.plannedProgressionEntities.map((function(e){return Object(j.jsx)(mn,{entity:e,progressionPlannerViewModel:t})}))})})}})})),yn=function(){function e(t,n){Object(C.a)(this,e),this._progressionState=void 0,this._courseState=void 0,this._progressionPlannerState=void 0,this._displayableContainerPanels=new Set,Object(z.p)(this,{_displayableContainerPanels:z.q}),this._progressionState=t,this._progressionPlannerState={id:"progressionPlanner",title:"Progression Planner",programs:[],specialisations:[]},this._courseState=n}return Object(E.a)(e,[{key:"progressionState",get:function(){return this._progressionState}},{key:"progressionPlannerState",get:function(){return this._progressionPlannerState}},{key:"calculateUocOfChildren",value:function(e){return Object(G.a)(this.getUniqueUocOfCurriculumContainer(e).values()).reduce((function(e,t){return e+t}),0)}},{key:"getUniqueUocOfCurriculumContainer",value:function(e){var t=this,n=new Map;return e.elements.forEach((function(e){if(e.isCourse()){var r=t._courseState.getCourseById(e.itemCode);r&&r.courseStatus!==q.UNPLANNED&&n.set(e.itemCode,e.creditPoints)}else if(e.isSpecialisation()){var i=t.progressionState.getSpecialisationById(e.itemCode);i&&i.progressionStatus!==a.UNPLANNED&&n.set(e.itemCode,e.creditPoints)}})),e.containers.forEach((function(e){t.getUniqueUocOfCurriculumContainer(e).forEach((function(e,t){return n.set(t,e)}))})),n}},{key:"toggleContainer",value:function(e){this._displayableContainerPanels.has(e)?this._displayableContainerPanels.delete(e):this._displayableContainerPanels.add(e)}},{key:"isAnySubContainerActive",value:function(e){var t=this;return e.containers.filter((function(e){return t._displayableContainerPanels.has(e.id)||t.isAnySubContainerActive(e)})).length>0}},{key:"toggleAllContainers",value:function(e){var t=this;this.isAnySubContainerActive(e)?e.containers.forEach((function(e){t.setAllContainersInactive(e)})):e.containers.forEach((function(e){t.setAllContainersActive(e)}))}},{key:"setAllContainersActive",value:function(e){var t=this;e.containers.forEach((function(e){t.setAllContainersActive(e)})),this._displayableContainerPanels.add(e.id)}},{key:"setAllContainersInactive",value:function(e){var t=this;e.containers.forEach((function(e){t.setAllContainersInactive(e)})),this._displayableContainerPanels.delete(e.id)}},{key:"isContainerActive",value:function(e){return this._displayableContainerPanels.has(e)}}]),e}(),Sn=b.b.button(yt||(yt=Object(g.a)(["\n  background-color: forestgreen;\n  border: none;\n  border-radius: 4px;\n  color: white;\n  padding: 15px 32px;\n  text-decoration: none;\n  display: inline-block;\n  font-size: 16px;\n  margin: 4px 2px;\n  cursor: pointer;\n  width: 100%;\n  -webkit-user-select: none;  /* Chrome all / Safari all */\n  -moz-user-select: none;     /* Firefox all */\n  -ms-user-select: none;      /* IE 10+ */\n  user-select: none;          /* Likely future */ \n"]))),xn=function(e){var t=e.autoPlannerViewModel;return Object(j.jsx)(Sn,{onClick:function(){return t.autoPlan()},children:"Auto Plan Degree"})},Cn=function(){function e(t){Object(C.a)(this,e),this.courseState=void 0,this.courseState=t}return Object(E.a)(e,[{key:"autoPlanCourseState",get:function(){return this.courseState}},{key:"autoPlan",value:function(){for(var e=!0,t=this.getYearsToTryAllocate(this.courseState.getMaxAllocatedYear),n=["Term 1","Term 2","Term 3"];!0===e;){for(var r=this.courseState.plannedCourses,i=(r.length,!1),s=0;s<r.length;s++)for(var a=!1,o=0;o<t.length;o++)if(!1===a)for(var c=0;c<n.length;c++){var u=this.courseState.getMissingRequirementsWhenAssigningCourseToTerm(r[s],new B(t[o],n[c])),l=this.termHasLessThanThreeCourses(t[o],n[c],this.courseState.termCourseMap),d=new B(t[o],n[c]).isBefore(new B(2021,"Term 2"));if(u=0===u.length,!d&&l&&u){this.courseState.assignCourseToTerm(r[s],new B(t[o],n[c])),a=!0,i=!0;break}}!1===i&&(e=!1)}}},{key:"termHasLessThanThreeCourses",value:function(e,t,n){var r=e+"_"+t;return!n.has(r)||!(n.get(r).length>=3)}},{key:"getYearsToTryAllocate",value:function(e){for(var t=[],n=2021;n<=e+4;n++)t.push(n);return t}}]),e}(),En=function(){var e=Object(u.useContext)(un),t=new zt(e.courseState),n=new yn(e.progressionState,e.courseState),r=new N(e.userState,e.progressionState,e.courseState),i=new Cn(e.courseState);return Object(j.jsx)(un.Provider,{value:e,children:Object(j.jsxs)("div",{className:"ui maincontainer",children:[Object(j.jsx)(Ze,{userState:e.userState,searchDataState:e.searchDataState}),Object(j.jsxs)(p.a,{className:"split-pane-flex",split:"vertical",defaultSize:"min(50vw, 1000px)",primary:"second",children:[Object(j.jsx)(f.a,{style:{padding:10},fluid:!0,children:Object(j.jsx)(On,{progressionPlannerViewModel:n})}),Object(j.jsxs)(f.a,{style:{padding:10,paddingLeft:50},fluid:!0,children:[Object(j.jsx)(O,{localImportExportViewModel:r}),Object(j.jsx)(xn,{autoPlannerViewModel:i}),Object(j.jsx)(Ft,{plannerViewModel:t})]})]})]})})},wn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,434)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),r(e),i(e),s(e),a(e)}))};h.a.render(Object(j.jsx)(l.a.StrictMode,{children:Object(j.jsx)(En,{})}),document.getElementById("root")),wn()}},[[385,1,2]]]);
//# sourceMappingURL=main.a85ee5d3.chunk.js.map